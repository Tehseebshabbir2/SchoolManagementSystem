<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Classes | School Management System</title>
  <link rel="stylesheet" href="style.css" />
  <link rel="stylesheet" href="media qeure.css">
</head>
<body>
<header class="header">
        <div class="half-header">
<div class="logo">
    <img src="icon.png" alt="">
    <h1>School Management System</h1>
</div>
</div>
<div class="half-header2">
   <button class="add-btn" onclick="openModal()">+ Add Subject</button>
 </div>
    </header>
    <div class="main-classes">
    <div class="sidebar">
  <nav>
    <ul>
      <li><a href="index.html">Dashbord</a></li>
      <li><a href="user.html">Users</a></li>
      <li><a href="class.html">Classes</a></li>
      <li><a href="#">Subjects</a></li>
      <li><a href="student.html">Students</a></li>
      <li><a href="admission.html">Admission</a></li>
    </ul>
  </nav>
</div>
  <div class="container">
    <div class="search-container">
  <input type="text" id="searchInput" placeholder="Search Subject Name..." onkeyup="searchClass()" />
</div>
    <table>
      <thead>
        <tr>
          <th>Subject Name</th>
          <th>Class</th>
          <th>Teacher</th>
          <th>Total Students</th>
          <th>Room #</th>
          <th>action</th>
        </tr>
      </thead>
      <tbody id="classTable">
      </tbody>
    </table>
  </div>
</div>
  <div id="classModal" class="modal">
    <div class="modal-content">
      <h3>Add New Class</h3>
      <input type="text" id="subjectname" placeholder="Subject Name" />
      <input type="text" id="classname" placeholder="Class " />
      <input type="text" id="classteacher" placeholder="Class Teacher Name" />
      <input type="number" id="totalstudents" placeholder="Total Students" />
      <input type="text" id="roome" placeholder="Room" />
      <button onclick="addClass()">Add Subject</button>
    </div>
  </div>
<script>
  const table = document.getElementById("classTable");
  let classData = JSON.parse(localStorage.getItem("subjects")) || [];
  let editIndex = null;

  function displayClasses() {
    table.innerHTML = "";
    classData.forEach((item, index) => {
      const row = table.insertRow();
      row.innerHTML = `
        <td>${item.subjectname}</td>
        <td>${item.classname}</td>
        <td>${item.classteacher}</td>
        <td>${item.totalstudents}</td>
        <td>${item.roome}</td>
        <td>
          <button onclick="editClass(${index})" class="crud-btn">Edit</button>
          <button onclick="deleteClass(${index})" class="crud-btn">Delete</button>
        </td>
      `;
    });
  }

  function addClass() {
    const subjectname = document.getElementById("subjectname").value.trim();
    const classname = document.getElementById("classname").value.trim();
    const classteacher = document.getElementById("classteacher").value.trim();
    const totalstudents = document.getElementById("totalstudents").value.trim();
    const roome = document.getElementById("roome").value.trim();

    if (!subjectname || !classname || !classteacher || !totalstudents || !roome) {
      alert("Please fill all fields!");
      return;
    }

    const newClass = { subjectname, classname, classteacher, totalstudents, roome };

    if (editIndex !== null) {
      classData[editIndex] = newClass;
      editIndex = null;
    } else {
      classData.push(newClass);
    }

    localStorage.setItem("subjects", JSON.stringify(classData));
    displayClasses();
    closeModal();
    clearForm();
  }

  function editClass(index) {
    const item = classData[index];
    document.getElementById("subjectname").value = item.subjectname;
    document.getElementById("classname").value = item.classname;
    document.getElementById("classteacher").value = item.classteacher;
    document.getElementById("totalstudents").value = item.totalstudents;
    document.getElementById("roome").value = item.roome;

    editIndex = index;
    openModal();
  }

  function deleteClass(index) {
    // if (confirm("Are you sure you want to delete this subject?")) 
      classData.splice(index, 1);
      localStorage.setItem("subjects", JSON.stringify(classData));
      displayClasses();
    }
  

  function searchClass() {
    const input = document.getElementById("searchInput").value.toLowerCase();
    const rows = document.querySelectorAll("#classTable tr");
    let found = false;

    rows.forEach(row => {
      const subjectName = row.cells[0].textContent.toLowerCase();
      if (subjectName.includes(input)) {
        row.style.display = "";
        found = true;
      } else {
        row.style.display = "none";
      }
    });

    if (!found && input.trim() !== "") {
      alert("Subject not found!");
    }
  }

  function openModal() {
    document.getElementById("classModal").style.display = "block";
  }

  function closeModal() {
    document.getElementById("classModal").style.display = "none";
  }

  function clearForm() {
    document.getElementById("subjectname").value = '';
    document.getElementById("classname").value = '';
    document.getElementById("classteacher").value = '';
    document.getElementById("totalstudents").value = '';
    document.getElementById("roome").value = '';
  }

  window.onclick = function(event) {
    const modal = document.getElementById("classModal");
    if (event.target == modal) {
      closeModal();
    }
  };

 
  displayClasses();
</script>

</body>
</html>
